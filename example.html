<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/CSS/style.css">
    <title>Drumkit</title>
</head>
<body>
    <audio src="sounds/boom.wav" controls class="aBoom"></audio>
    <audio src="sounds/clap.wav" controls class="aClap"></audio>
    <audio src="sounds/hihat.wav" controls class="aHihat"></audio>
    <div class="chanels"> 
        <div class="chanel1">
    <button class="recording1">Rec</button>
    <button class="stopRec1">Stop</button>
    </div>
</div>
<div class="chanels">
        <div class="chanel2"> 
    <button class="recording">Rec</button>
    <button class="stopRec">Stop</button>
        </div>
</div>
    <script type="text/javascript">

        const clap = document.querySelector('.aClap');
        const boom = document.querySelector('.aBoom');
        const hihat = document.querySelector('.aHihat');


//events listeners
 
function CreateChanel(recBtn)
    {
       
        this.nameChanel=recBtn.parentNode.className;
        this.chanelsounds=[];
        this.button=recBtn,
        this.test=function(){
            console.log(recBtn);
            
    }


}
let counter=0;
document.querySelector('.recording1').addEventListener('click',function(){

    
    const chanel1 =new CreateChanel(document.querySelector('.recording'));
    
    
    if(counter===0){
        
        
        counter++;
        console.log(counter);
        counter++;
        chanel1.startRec();
    }
        

});

// prototype chanels
        
CreateChanel.prototype.startRec=function(){
                const that = this;
                document.body.addEventListener('keypress',
                    function(e){

                        if (e.code === 'KeyA') {
                            clap.currentTime = 0
                            clap.play()
                            const time = Date.now()
                            that.chanelsounds.push({
                                key: e.code,
                                time: time
                            })
                        }else if(e.code==='KeyS'){
                            boom.currentTime = 0
                            boom.play()
                            const time = Date.now()
                            that.chanelsounds.push({
                                key: e.code,
                                time: time
                            })
                        }else if(e.code==='KeyD'){
                            hihat.currentTime = 0
                            hihat.play()
                            const time = Date.now()
                            that.chanelsounds.push({
                                key: e.code,
                                time: time
                            })}});/*return*/;
                            console.log(this.chanelsounds);
            }
            CreateChanel.prototype.stopRec=function(){
                return this.chanelsounds;
            }
    </script>
</body>
</html>