<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/CSS/style.css">
    <title>Drumkit</title>
</head>
<body>
    
    <div class="channels">
        <div class="channel-first">
                <h1>Channel 1</h1>
        <div class="samples">
                <div class=""><audio src="sounds/boom.wav" controls class="aBoom"></audio></div>
                <div class=""><audio src="sounds/clap.wav" controls class="aClap"></audio></div>
                <div class=""><audio src="sounds/hihat.wav" controls class="aHihat"></audio></div>
        </div> 
        <div class="channel1">
    <button class="recording">Rec</button>
    <button class="stopRec">Stop</button>
    </div>
    </div>
</div>
<div class="channels">
        <div class="channel2"> 
                <h1>Channel 2</h1>
    <button class="recording2">Rec</button>
    <button class="stopRec2">Stop</button>
        </div>
</div>
<div class="channels">
    <div class="to-play">
        <h1>Audio Room</h1>
        <p>example paths audio from record</p>
        <div class="path-audio">
            <div class=""><label for="">Path one<audio src="#" controls class="example"></audio></label></div>
            <div class=""><label for="">Path two<audio src="#" controls class="example"></audio></label></div>
        </div>
    </div>
</div>
    <script type="text/javascript">
window.addEventListener('DOMContentLoaded', (event) => {



    

    const clap = document.querySelector('.aClap');
            const boom = document.querySelector('.aBoom');
            const hihat = document.querySelector('.aHihat');
    
    function CreateChannel(recBtn)
        {
            this.nameChanel=recBtn.parentNode.className;
            this.channelsounds=[];
            this.button=recBtn
        }
        

        

             CreateChannel.prototype.playClap=function(e){ 
                            if (e.code === 'KeyA') {
                                clap.currentTime = 0
                                clap.play()
                                console.log('poszlo');
                                const time = Date.now()
                                this.channelsounds.push({
                                    key: e.code,
                                    time: time
                                })
                            }else if(e.code==='KeyS'){
                                boom.currentTime = 0
                                boom.play()
                                const time = Date.now()
                                this.channelsounds.push({
                                    key: e.code,
                                    time: time
                                })
                            }else if(e.code==='KeyD'){
                                hihat.currentTime = 0
                                hihat.play()
                                const time = Date.now()
                                this.channelsounds.push({
                                    key: e.code,
                                    time: time
                                })
                        } 
            }
            
            
        
        CreateChannel.prototype.startRec=function(){
            console.dir(this);
                const that=this;
                document.querySelector('.recording').addEventListener('click',function(){
                        

                       document.body.addEventListener('keypress',that.playClap.bind(that));  

                       });    
                       
                
        }

                CreateChannel.prototype.stopRec=function(){
                    const that=this;
                  document.querySelector('.stopRec').addEventListener('click',function(){
                    document.body.removeEventListener('keypress',that.startRec);
                  })
                    
                   
                }

                const channel1 =new CreateChannel(document.querySelector('.recording'));
        
            channel1.startRec();
            channel1.stopRec();

            
            
    console.log(channel1.channelsounds);
                
        
});
       
    </script>
</body>
</html>